@inject IJSRuntime _jsRuntime;
@inject MetamaskHostProvider _metamaskHostProvider

@ChildContent

@code {
    [Parameter] public RenderFragment ChildContent { get; set; }

    protected override async Task OnInitializedAsync()
    {
        var dotNetObjRef = DotNetObjectReference.Create(this);
        await _jsRuntime.InvokeVoidAsync("window.SetDotnetReference", dotNetObjRef);
    }

    [JSInvokable("SelectedAccountChanged")]
    public async Task SelectedAccountChanged(string selectedAccount)
    {
        await _metamaskHostProvider.ChangeSelectedAccountAsync(selectedAccount);
    }
        
    [JSInvokable("SelectedNetworkChanged")]
    public async Task SelectedNetworkChanged(string selectedNetwork)
    {
        await _metamaskHostProvider.ChangeSelectedNetworkAsync((int)(new HexBigInteger(selectedNetwork).Value));
    }
    
    [JSInvokable("MetamaskConnected")]
    public async Task MetamaskConnected(int chainId)
    {
        await _metamaskHostProvider.OnMetamaskConnected(chainId);
    }

    [JSInvokable("MetamaskDisconnected")]
    public async Task MetamaskDisconnected()
    {
        await _metamaskHostProvider.OnMetamaskDisconnected();
    }
}